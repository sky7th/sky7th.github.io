---
layout: post
title:  "[운영체제] 스케쥴링 알고리즘"
subtitle:   "[운영체제] 스케쥴링 알고리즘"
categories: study
tags: os
---


### 프로세스
- 메모리에 올려져서, 실행중인 프로그램

응용프로그램은 여러 개의 프로세스로 이루어짐(간단한건 한 개)

### 스케쥴러  
- 프로세스를 관리함


### 스케쥴링 알고리즘  
> 어느 순서대로 프로세스를 실행시킬까 ?
- 목표 : 시분할 시스템, 멀티 프로그래밍  

### FIFO 스케쥴러  
> 프로세스가 저장매채 읽기, 프린팅 하는 작업 없이 CPU 가 쭉 일한다고 가정
- 배치 처리 시스템
- FCFS 스케쥴러 


### SJF 스케쥴러 
- 단점 : 실행 시간들을 다 알아야 함


#### RealTime OS(RTOS)

>응용 프로그램 실시간 성능 보장을 목표로 하는 OS  
> 정확하게 프로그램 시작, 완료를 보장

#### General Purpose OS(GPOS)  
> 프로세스 시간에 민감하지 않고 일반적인 목적으로 사용됨  
> ex) 윈도우, 리눅스

### 우선순위 기반 스케쥴러(Priority-Based 스케쥴러)  
- 정적 우선순위
  - 프로세스마다 우선순위를 미리 지정
- 동적 우선순위
  - 스케쥴러가 상황에 따라 우선순위를 동적으로 변경

### Round Robin 스케쥴러  
- 여러 프로세스가 각자 블록 한 개씩 번갈아 가면서 실행
- 시분할 시스템 기반

### 프로세스 상태  
> ready -> running -> block state

- Ready State Queue
- Running State Queue
- Block State Queue

CPU 가 아무것도 안할 때 = IDLE 상태


### 선점형, 비선점형 스케쥴러  
- 번갈아서 가능, 번갈아서 불가능


------

### 인터럽트 

> CPU 는 한 줄의 코드만 읽는다.
> 
> 그래서 어떤 일이 생기면 중간에 알려줘야 한다.

- IO Device 와의 커뮤니케이션 
  - 저장매체에서 데이터 처리 완료 시, (block -> ready)
  
- 예외 상황 핸들링

#### 내부 인터럽트 :
- 0으로 나눔
- 사용자 모드에서 허용되지 명령 or 공간 접근 시
- 오버플로우

#### 외부 인터럽트 :
- 전원, 기계 문제
- IO 문제, Timer 이벤트

### 시스템 콜 인터럽트
> 시스템콜 실행을 위해서는 강제로 코드에 인터럽트 명령을 넣어, CPU 에게 실행시켜야 한다.

    mov eax, 1  // 시스템콜 번호를 넣음
    mov ebx, 0  // 시스템콜에 해당하는 인자값을 넣음
    int 0x80  // 소프트웨어 인터럽트 명령

- 시스템콜 인터럽트 명령을 호출하면서 0x80(<int><op-code>)값을 넘겨줌
  - CPU는 사용자 모드를 커널 모드로 바꿔줌
  - IDT(Interrupt Descriptor Table)에서 0x80에 해당하는 주소(함수)를 찾아서 실행함
  - system_call() 에서 eax로부터 시스템콜 번호를 찾아서, 해당 번호에 맞는 시스템콜 함수로 이동


    | %eax | kernel function(system call) | %ebx |
    |:--------|--------:|--------:|
    | 1 | sys_exit (exit) | int |
    | 2 | sys_fork (fork) | struct pt_regs |
    | 3 | sys_read (read) | unsigned int |
    | 4 | sys_write (write) | unsigned int |
    | 5 | sys_open (open) | const char* |

  - 해당 시스템콜 함수 실행 후, 커널 -> 사용자 전환, 다시 해당 프로세스 다음 코드 진행

### 인터럽트와 IDT  
- 인터럽트는 미리 정의되어 각각 번호(이벤트)와 실행 코드를 가리키는 주소가 기록되있음
- 운영체제가 IDT에 컴퓨터 부팅시 운영체제 내부 코드로 기록(커널 영역)

timer_interrupt() 함수로 선점형 스케쥴러 구현

